{"ast":null,"code":"var _jsxFileName = \"/Users/fmartins/Trybe/fabemiliano.github.io/projetos/recipe-app/sd-03-recipes-app-04/src/components/FoodButtons.jsx\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport share from \"../images/shareIcon.svg\";\nimport notFavorite from \"../images/whiteHeartIcon.svg\";\nimport favorite from \"../images/blackHeartIcon.svg\";\nimport { ContextAplication } from '../context/ContextAplication';\nexport function getDoneLocalStorage(id) {\n  const storage = JSON.parse(localStorage.getItem('doneRecipes'));\n  let done;\n\n  if (!storage) {\n    done = false;\n  } else {\n    done = storage.find(e => e.id !== id);\n  }\n\n  return done;\n}\nexport function getStartedLocalStorage(id) {\n  const storage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  let started;\n\n  if (!storage) {\n    started = false;\n  } else {\n    started = Object.keys(storage).find(e => e === id);\n  }\n\n  return started;\n}\nexport function getIfHasBeenFavorited(id) {\n  const storage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n\n  if (storage) {\n    const favorited = storage.find(e => e.id === id);\n    return favorited;\n  }\n\n  return false;\n}\n\nfunction clickFavorite(setIsFavorite, recipeInfo, isFavorite) {\n  setIsFavorite(fav => !fav);\n  const {\n    idMeal,\n    strArea,\n    strCategory,\n    strMeal,\n    strMealThumb\n  } = recipeInfo;\n  const mealInfo = {\n    id: idMeal,\n    type: 'comida',\n    area: strArea,\n    category: strCategory,\n    alcoholicOrNot: '',\n    name: strMeal,\n    image: strMealThumb\n  };\n  let storage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n\n  if (!storage) {\n    storage = [];\n  }\n\n  if (!isFavorite) {\n    const newStorage = [...storage, mealInfo];\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n\n  if (isFavorite) {\n    const newStorage = storage.filter(e => !e.id === idMeal);\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n}\n\nfunction renderShareAndFavoriteButtons(setIsFavorite, recipeInfo, isFavorite, goToRoute, id) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"favourite\",\n    onClick: () => clickFavorite(setIsFavorite, recipeInfo, isFavorite),\n    src: favorite,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, getIfHasBeenFavorited(id) ? /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"favorite-btn\",\n    src: favorite,\n    alt: \"favorite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"favorite-btn\",\n    src: notFavorite,\n    alt: \"favorite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(CopyToClipboard, {\n    text: window.location.href,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => alert('Link copiado!'),\n    className: \"favourite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"share-btn\",\n    src: share,\n    alt: \"icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }))), goToRoute && /*#__PURE__*/React.createElement(Redirect, {\n    to: `/comidas/${id}/in-progress`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }));\n}\n\nfunction Buttons() {\n  const [goToRoute, setGoToRoute] = useState(false);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const {\n    recipeInfo,\n    id\n  } = useContext(ContextAplication);\n  useEffect(() => {\n    if (getIfHasBeenFavorited(id)) {\n      setIsFavorite(true);\n    }\n  }, [id]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bottom-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }\n  }, !getDoneLocalStorage(id) && !getStartedLocalStorage(id) && /*#__PURE__*/React.createElement(\"button\", {\n    \"data-testid\": \"start-recipe-btn\",\n    type: \"button\",\n    onClick: () => setGoToRoute(true),\n    className: \"start-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, \"Iniciar Receita\"), getStartedLocalStorage(id) && !getDoneLocalStorage(id) && /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"start-button\",\n    \"data-testid\": \"start-recipe-btn\",\n    onClick: () => setGoToRoute(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, \"Continuar Receita\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"share-and-favourite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, renderShareAndFavoriteButtons(setIsFavorite, recipeInfo, isFavorite, goToRoute, id)), goToRoute && /*#__PURE__*/React.createElement(Redirect, {\n    to: `/comidas/${id}/in-progress`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }));\n}\n\nexport default Buttons;","map":{"version":3,"sources":["/Users/fmartins/Trybe/fabemiliano.github.io/projetos/recipe-app/sd-03-recipes-app-04/src/components/FoodButtons.jsx"],"names":["React","useState","useContext","useEffect","Redirect","CopyToClipboard","ContextAplication","getDoneLocalStorage","id","storage","JSON","parse","localStorage","getItem","done","find","e","getStartedLocalStorage","started","Object","keys","getIfHasBeenFavorited","favorited","clickFavorite","setIsFavorite","recipeInfo","isFavorite","fav","idMeal","strArea","strCategory","strMeal","strMealThumb","mealInfo","type","area","category","alcoholicOrNot","name","image","newStorage","setItem","stringify","filter","renderShareAndFavoriteButtons","goToRoute","favorite","notFavorite","window","location","href","alert","share","Buttons","setGoToRoute"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport share from '../images/shareIcon.svg';\nimport notFavorite from '../images/whiteHeartIcon.svg';\nimport favorite from '../images/blackHeartIcon.svg';\nimport { ContextAplication } from '../context/ContextAplication';\n\nexport function getDoneLocalStorage(id) {\n  const storage = JSON.parse(localStorage.getItem('doneRecipes'));\n  let done;\n  if (!storage) {\n    done = false;\n  } else {\n    done = storage.find((e) => e.id !== id);\n  }\n  return done;\n}\n\nexport function getStartedLocalStorage(id) {\n  const storage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  let started;\n  if (!storage) {\n    started = false;\n  } else {\n    started = Object.keys(storage).find((e) => e === id);\n  }\n  return started;\n}\n\nexport function getIfHasBeenFavorited(id) {\n  const storage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n  if (storage) {\n    const favorited = storage.find((e) => e.id === id);\n    return favorited;\n  }\n  return false;\n}\n\nfunction clickFavorite(setIsFavorite, recipeInfo, isFavorite) {\n  setIsFavorite((fav) => !fav);\n  const {\n    idMeal, strArea, strCategory, strMeal, strMealThumb,\n  } = recipeInfo;\n  const mealInfo = {\n    id: idMeal,\n    type: 'comida',\n    area: strArea,\n    category: strCategory,\n    alcoholicOrNot: '',\n    name: strMeal,\n    image: strMealThumb,\n  };\n  let storage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n  if (!storage) {\n    storage = [];\n  }\n  if (!isFavorite) {\n    const newStorage = [...storage, mealInfo];\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n  if (isFavorite) {\n    const newStorage = storage.filter((e) => !e.id === idMeal);\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n}\n\nfunction renderShareAndFavoriteButtons(setIsFavorite, recipeInfo, isFavorite, goToRoute, id) {\n  return (\n    <div>\n      <button\n        type=\"button\"\n        className=\"favourite\"\n        onClick={() => clickFavorite(setIsFavorite, recipeInfo, isFavorite)}\n        src={favorite}\n      >\n        {getIfHasBeenFavorited(id)\n          ? <img data-testid=\"favorite-btn\" src={favorite} alt=\"favorite\" />\n          : <img data-testid=\"favorite-btn\" src={notFavorite} alt=\"favorite\" />}\n      </button>\n      <CopyToClipboard text={window.location.href}>\n        <button\n          type=\"button\"\n          onClick={() => alert('Link copiado!')}\n          className=\"favourite\"\n        >\n          <img data-testid=\"share-btn\" src={share} alt=\"icon\" />\n        </button>\n      </CopyToClipboard>\n      {goToRoute && <Redirect to={`/comidas/${id}/in-progress`} />}\n    </div>\n  );\n}\n\nfunction Buttons() {\n  const [goToRoute, setGoToRoute] = useState(false);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const { recipeInfo, id } = useContext(ContextAplication);\n\n  useEffect(() => {\n    if (getIfHasBeenFavorited(id)) { setIsFavorite(true); }\n  }, [id]);\n\n  return (\n    <div className=\"bottom-buttons\">\n      {!getDoneLocalStorage(id) && !getStartedLocalStorage(id) && (\n        <button\n          data-testid=\"start-recipe-btn\"\n          type=\"button\"\n          onClick={() => setGoToRoute(true)}\n          className=\"start-button\"\n        >\n          Iniciar Receita\n        </button>\n      )}\n      {getStartedLocalStorage(id) && !getDoneLocalStorage(id) && (\n        <button\n          type=\"button\"\n          className=\"start-button\"\n          data-testid=\"start-recipe-btn\"\n          onClick={() => setGoToRoute(true)}\n        >\n          Continuar Receita\n        </button>\n      )}\n      <div className=\"share-and-favourite\">\n        {renderShareAndFavoriteButtons(setIsFavorite, recipeInfo, isFavorite, goToRoute, id)}\n      </div>\n      {goToRoute && <Redirect to={`/comidas/${id}/in-progress`} />}\n    </div>\n  );\n}\n\nexport default Buttons;\n"]},"metadata":{},"sourceType":"module"}