{"ast":null,"code":"var _jsxFileName = \"/Users/fmartins/Trybe/fabemiliano.github.io/projetos/recipe-app/sd-03-recipes-app-04/src/components/DrinkButtons.jsx\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport share from \"../images/shareIcon.svg\";\nimport notFavorite from \"../images/whiteHeartIcon.svg\";\nimport favorite from \"../images/blackHeartIcon.svg\";\nimport { getDoneLocalStorage, getIfHasBeenFavorited, copyToClipboard } from './FoodButtons';\nimport { ContextAplication } from '../context/ContextAplication';\n\nfunction clickFavorite(setIsFavorite, recipeInfo, isFavorite) {\n  setIsFavorite(fav => !fav);\n  const {\n    idDrink,\n    strDrink,\n    strDrinkThumb,\n    strAlcoholic,\n    strCategory\n  } = recipeInfo;\n  const drinkInfo = {\n    id: idDrink,\n    type: 'bebida',\n    area: '',\n    category: strCategory,\n    alcoholicOrNot: strAlcoholic,\n    name: strDrink,\n    image: strDrinkThumb\n  };\n  let storage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n\n  if (!storage) {\n    storage = [];\n  }\n\n  if (!isFavorite) {\n    const newStorage = [...storage, drinkInfo];\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n\n  if (isFavorite) {\n    const newStorage = storage.filter(e => e.id !== idDrink);\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n}\n\nfunction getStartedLocalStorage(id) {\n  const storage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  let started;\n\n  if (!storage || storage.cocktails === undefined) {\n    started = false;\n  } else {\n    started = Object.keys(storage.cocktails).find(e => e === id);\n  }\n\n  return started;\n}\n\nfunction renderFavoriteButton(setIsFavorite, recipeInfo, isFavorite, goToRoute, id) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"share-and-favourite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"favourite\",\n    onClick: () => clickFavorite(setIsFavorite, recipeInfo, isFavorite),\n    src: favorite,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, getIfHasBeenFavorited(id) ? /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"favorite-btn\",\n    src: favorite,\n    alt: \"favorite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"favorite-btn\",\n    src: notFavorite,\n    alt: \"favorite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  })), goToRoute && /*#__PURE__*/React.createElement(Redirect, {\n    to: `/bebidas/${id}/in-progress`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }));\n}\n\nfunction renderShareButton(setHide) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"share-and-favourite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => copyToClipboard(setHide),\n    className: \"favourite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"share-btn\",\n    src: share,\n    alt: \"icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  })));\n}\n\nfunction Buttons() {\n  const [goToRoute, setGoToRoute] = useState(false);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [hide, setHide] = useState(true);\n  const {\n    recipeInfo,\n    id\n  } = useContext(ContextAplication);\n  useEffect(() => {\n    if (getIfHasBeenFavorited(id)) {\n      setIsFavorite(true);\n    }\n  }, [id]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bottom-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, renderFavoriteButton(setIsFavorite, recipeInfo, isFavorite, goToRoute, id), !getDoneLocalStorage(id) && !getStartedLocalStorage(id) && /*#__PURE__*/React.createElement(\"button\", {\n    \"data-testid\": \"start-recipe-btn\",\n    type: \"button\",\n    onClick: () => setGoToRoute(true),\n    className: \"start-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, \"Iniciar Receita\"), getStartedLocalStorage(id) && !getDoneLocalStorage(id) && /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"start-button\",\n    \"data-testid\": \"start-recipe-btn\",\n    onClick: () => setGoToRoute(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, \"Continuar Receita\"), renderShareButton(setHide), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"alert\",\n    hidden: hide,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, \"Link copiado!\"), goToRoute && /*#__PURE__*/React.createElement(Redirect, {\n    to: `/bebidas/${id}/in-progress`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }));\n}\n\nexport default Buttons;","map":{"version":3,"sources":["/Users/fmartins/Trybe/fabemiliano.github.io/projetos/recipe-app/sd-03-recipes-app-04/src/components/DrinkButtons.jsx"],"names":["React","useState","useContext","useEffect","Redirect","getDoneLocalStorage","getIfHasBeenFavorited","copyToClipboard","ContextAplication","clickFavorite","setIsFavorite","recipeInfo","isFavorite","fav","idDrink","strDrink","strDrinkThumb","strAlcoholic","strCategory","drinkInfo","id","type","area","category","alcoholicOrNot","name","image","storage","JSON","parse","localStorage","getItem","newStorage","setItem","stringify","filter","e","getStartedLocalStorage","started","cocktails","undefined","Object","keys","find","renderFavoriteButton","goToRoute","favorite","notFavorite","renderShareButton","setHide","share","Buttons","setGoToRoute","hide"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport share from '../images/shareIcon.svg';\nimport notFavorite from '../images/whiteHeartIcon.svg';\nimport favorite from '../images/blackHeartIcon.svg';\nimport {\n  getDoneLocalStorage,\n  getIfHasBeenFavorited,\n  copyToClipboard,\n} from './FoodButtons';\nimport { ContextAplication } from '../context/ContextAplication';\n\nfunction clickFavorite(setIsFavorite, recipeInfo, isFavorite) {\n  setIsFavorite((fav) => !fav);\n  const {\n    idDrink, strDrink, strDrinkThumb, strAlcoholic, strCategory,\n  } = recipeInfo;\n  const drinkInfo = {\n    id: idDrink,\n    type: 'bebida',\n    area: '',\n    category: strCategory,\n    alcoholicOrNot: strAlcoholic,\n    name: strDrink,\n    image: strDrinkThumb,\n  };\n  let storage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n  if (!storage) {\n    storage = [];\n  }\n  if (!isFavorite) {\n    const newStorage = [...storage, drinkInfo];\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n  if (isFavorite) {\n    const newStorage = storage.filter((e) => e.id !== idDrink);\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n}\n\nfunction getStartedLocalStorage(id) {\n  const storage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  let started;\n  if (!storage || storage.cocktails === undefined) {\n    started = false;\n  } else {\n    started = Object.keys(storage.cocktails).find((e) => e === id);\n  }\n  return started;\n}\n\nfunction renderFavoriteButton(setIsFavorite, recipeInfo, isFavorite, goToRoute, id) {\n  return (\n    <div className=\"share-and-favourite\">\n      <button\n        type=\"button\"\n        className=\"favourite\"\n        onClick={() => clickFavorite(setIsFavorite, recipeInfo, isFavorite)}\n        src={favorite}\n      >\n        {getIfHasBeenFavorited(id)\n          ? <img data-testid=\"favorite-btn\" src={favorite} alt=\"favorite\" />\n          : <img data-testid=\"favorite-btn\" src={notFavorite} alt=\"favorite\" />}\n      </button>\n      {goToRoute && <Redirect to={`/bebidas/${id}/in-progress`} />}\n    </div>\n  );\n}\n\nfunction renderShareButton(setHide) {\n  return (\n    <div className=\"share-and-favourite\">\n      <button\n        type=\"button\"\n        onClick={() => copyToClipboard(setHide)}\n        className=\"favourite\"\n      >\n        <img data-testid=\"share-btn\" src={share} alt=\"icon\" />\n      </button>\n    </div>\n  );\n}\n\nfunction Buttons() {\n  const [goToRoute, setGoToRoute] = useState(false);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [hide, setHide] = useState(true);\n  const { recipeInfo, id } = useContext(ContextAplication);\n  useEffect(() => {\n    if (getIfHasBeenFavorited(id)) { setIsFavorite(true); }\n  }, [id]);\n  return (\n    <div className=\"bottom-buttons\">\n      {renderFavoriteButton(setIsFavorite, recipeInfo, isFavorite, goToRoute, id)}\n      {!getDoneLocalStorage(id) && !getStartedLocalStorage(id) && (\n        <button\n          data-testid=\"start-recipe-btn\"\n          type=\"button\"\n          onClick={() => setGoToRoute(true)}\n          className=\"start-button\"\n        >\n          Iniciar Receita\n        </button>\n      )}\n      {getStartedLocalStorage(id) && !getDoneLocalStorage(id) && (\n        <button\n          type=\"button\"\n          className=\"start-button\"\n          data-testid=\"start-recipe-btn\"\n          onClick={() => setGoToRoute(true)}\n        >\n          Continuar Receita\n        </button>\n      )}\n      {renderShareButton(setHide)}\n      <p className=\"alert\" hidden={hide}>Link copiado!</p>\n      {goToRoute && <Redirect to={`/bebidas/${id}/in-progress`} />}\n    </div>\n  );\n}\n\nexport default Buttons;\n"]},"metadata":{},"sourceType":"module"}