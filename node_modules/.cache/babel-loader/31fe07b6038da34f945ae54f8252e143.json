{"ast":null,"code":"var _jsxFileName = \"/Users/fmartins/Trybe/fabemiliano.github.io/projetos/recipe-app/sd-03-recipes-app-04/src/components/FoodSearchBar.jsx\";\nimport React, { useState } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport * as api from '../services/foodApi';\nimport './CSS/SearchBar.css';\n\nfunction checkResults(data, setResult, setGoToRoute, setId) {\n  if (data.meals === null) {\n    alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n  } else if (data.meals.length === 1) {\n    setId(data.meals[0].idMeal);\n    setGoToRoute(true);\n  } else if (data.meals.length > 1) {\n    setResult(data.meals);\n  }\n}\n\nfunction renderRadioButtons(setSearchBy, setDisabled) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"radio-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"ingredient\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"ingredient\",\n    type: \"radio\",\n    name: \"search\",\n    \"data-testid\": \"ingredient-search-radio\",\n    onChange: e => {\n      setSearchBy(e.target.id);\n      setDisabled(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 9\n    }\n  }), \"Ingrediente\"), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"name\",\n    type: \"radio\",\n    name: \"search\",\n    \"data-testid\": \"name-search-radio\",\n    onChange: e => {\n      setSearchBy(e.target.id);\n      setDisabled(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  }), \"Nome\"), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"first-letter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"first-letter\",\n    type: \"radio\",\n    name: \"search\",\n    \"data-testid\": \"first-letter-search-radio\",\n    onChange: e => {\n      setSearchBy(e.target.id);\n      setDisabled(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }), \"Primeira Letra\"));\n}\n\nfunction doSearch(searchBy, searchedItem, setResult, setGoToRoute, setId) {\n  switch (searchBy) {\n    case 'ingredient':\n      {\n        api.getByIgredient(searchedItem).then(data => checkResults(data, setResult, setGoToRoute, setId));\n        break;\n      }\n\n    case 'name':\n      {\n        api.getMealByName(searchedItem).then(data => checkResults(data, setResult, setGoToRoute, setId));\n        break;\n      }\n\n    default:\n      {\n        if (searchedItem.length > 1) {\n          alert('Sua busca deve conter somente 1 (um) caracter');\n        }\n\n        if (searchedItem.length === 1) {\n          api.getByFirstLetter(searchedItem).then(data => checkResults(data, setResult, setGoToRoute, setId));\n        }\n      }\n  }\n}\n\nfunction FoodSearchBar() {\n  const [searchedItem, setSearchedItem] = useState('');\n  const [searchBy, setSearchBy] = useState('');\n  const [result, setResult] = useState([]);\n  const [goToRoute, setGoToRoute] = useState(false);\n  const [id, setId] = useState('');\n  const [disabled, setDisabled] = useState(true);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-area slide-in-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"searched-item\",\n    className: \"searched-item\",\n    type: \"text\",\n    placeholder: \"Buscar\",\n    onChange: e => setSearchedItem(e.target.value),\n    value: searchedItem,\n    \"data-testid\": \"search-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }), renderRadioButtons(setSearchBy, setDisabled), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => doSearch(searchBy, searchedItem, setResult, setGoToRoute, setId),\n    className: \"search-button\",\n    type: \"button\",\n    \"data-testid\": \"exec-search-btn\",\n    disabled: disabled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, \"Buscar\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"recipes-results\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, result.reduce((arr, e, i) => {\n    if (i < 12) {\n      return [...arr, /*#__PURE__*/React.createElement(Link, {\n        to: `/comidas/${e.idMeal}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: `product-pic product-pic-${i}`,\n        \"data-testid\": `${i}-recipe-card`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        \"data-testid\": `${i}-card-img`,\n        className: \"recipe-image\",\n        src: e.strMealThumb,\n        alt: \"thumbnail\",\n        width: \"120px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"h5\", {\n        \"data-testid\": `${i}-card-name`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 19\n        }\n      }, e.strMeal.length > 30 ? `${e.strMeal.slice(0, 30)}...` : e.strMeal)))];\n    }\n\n    return arr;\n  }, [])), goToRoute && /*#__PURE__*/React.createElement(Redirect, {\n    to: `/comidas/${id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }));\n}\n\nexport default FoodSearchBar;","map":{"version":3,"sources":["/Users/fmartins/Trybe/fabemiliano.github.io/projetos/recipe-app/sd-03-recipes-app-04/src/components/FoodSearchBar.jsx"],"names":["React","useState","Redirect","Link","api","checkResults","data","setResult","setGoToRoute","setId","meals","alert","length","idMeal","renderRadioButtons","setSearchBy","setDisabled","e","target","id","doSearch","searchBy","searchedItem","getByIgredient","then","getMealByName","getByFirstLetter","FoodSearchBar","setSearchedItem","result","goToRoute","disabled","value","reduce","arr","i","strMealThumb","strMeal","slice"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport * as api from '../services/foodApi';\nimport './CSS/SearchBar.css';\n\nfunction checkResults(data, setResult, setGoToRoute, setId) {\n  if (data.meals === null) {\n    alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n  } else if (data.meals.length === 1) {\n    setId(data.meals[0].idMeal);\n    setGoToRoute(true);\n  } else if (data.meals.length > 1) {\n    setResult(data.meals);\n  }\n}\n\nfunction renderRadioButtons(setSearchBy, setDisabled) {\n  return (\n    <div className=\"radio-buttons\">\n      <label htmlFor=\"ingredient\">\n        <input\n          id=\"ingredient\"\n          type=\"radio\"\n          name=\"search\"\n          data-testid=\"ingredient-search-radio\"\n          onChange={(e) => {\n            setSearchBy(e.target.id);\n            setDisabled(false);\n          }}\n        />\n        Ingrediente\n      </label>\n      <label htmlFor=\"name\">\n        <input\n          id=\"name\"\n          type=\"radio\"\n          name=\"search\"\n          data-testid=\"name-search-radio\"\n          onChange={(e) => {\n            setSearchBy(e.target.id);\n            setDisabled(false);\n          }}\n        />\n        Nome\n      </label>\n      <label htmlFor=\"first-letter\">\n        <input\n          id=\"first-letter\"\n          type=\"radio\"\n          name=\"search\"\n          data-testid=\"first-letter-search-radio\"\n          onChange={(e) => {\n            setSearchBy(e.target.id);\n            setDisabled(false);\n          }}\n        />\n        Primeira Letra\n      </label>\n    </div>\n  );\n}\n\nfunction doSearch(searchBy, searchedItem, setResult, setGoToRoute, setId) {\n  switch (searchBy) {\n    case 'ingredient': {\n      api.getByIgredient(searchedItem)\n        .then((data) => checkResults(data, setResult, setGoToRoute, setId));\n      break;\n    }\n    case 'name': {\n      api.getMealByName(searchedItem)\n        .then((data) => checkResults(data, setResult, setGoToRoute, setId));\n      break;\n    }\n    default: {\n      if (searchedItem.length > 1) { alert('Sua busca deve conter somente 1 (um) caracter'); }\n      if (searchedItem.length === 1) {\n        api.getByFirstLetter(searchedItem)\n          .then((data) => checkResults(data, setResult, setGoToRoute, setId));\n      }\n    }\n  }\n}\n\nfunction FoodSearchBar() {\n  const [searchedItem, setSearchedItem] = useState('');\n  const [searchBy, setSearchBy] = useState('');\n  const [result, setResult] = useState([]);\n  const [goToRoute, setGoToRoute] = useState(false);\n  const [id, setId] = useState('');\n  const [disabled, setDisabled] = useState(true);\n\n  return (\n    <div className=\"search-area slide-in-top\">\n      <input\n        id=\"searched-item\"\n        className=\"searched-item\"\n        type=\"text\"\n        placeholder=\"Buscar\"\n        onChange={(e) => setSearchedItem(e.target.value)}\n        value={searchedItem}\n        data-testid=\"search-input\"\n      />\n      {renderRadioButtons(setSearchBy, setDisabled)}\n      <button\n        onClick={() => doSearch(searchBy, searchedItem, setResult, setGoToRoute, setId)}\n        className=\"search-button\"\n        type=\"button\"\n        data-testid=\"exec-search-btn\"\n        disabled={disabled}\n      >\n        Buscar\n      </button>\n      <div className=\"recipes-results\">\n        {result.reduce((arr, e, i) => {\n          if (i < 12) {\n            return [...arr,\n              <Link to={`/comidas/${e.idMeal}`}>\n                <div className={`product-pic product-pic-${i}`} data-testid={`${i}-recipe-card`}>\n                  <img data-testid={`${i}-card-img`} className=\"recipe-image\" src={e.strMealThumb} alt=\"thumbnail\" width=\"120px\" />\n                  <h5 data-testid={`${i}-card-name`}>{(e.strMeal.length > 30) ? `${e.strMeal.slice(0, 30)}...` : e.strMeal }</h5>\n                </div>\n              </Link>,\n            ];\n          }\n          return arr;\n        }, [])}\n      </div>\n      {goToRoute && <Redirect to={`/comidas/${id}`} />}\n    </div>\n  );\n}\n\nexport default FoodSearchBar;\n"]},"metadata":{},"sourceType":"module"}