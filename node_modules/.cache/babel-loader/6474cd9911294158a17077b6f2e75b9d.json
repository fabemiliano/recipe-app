{"ast":null,"code":"var _jsxFileName = \"/Users/fmartins/Trybe/fabemiliano.github.io/projetos/recipe-app/sd-03-recipes-app-04/src/components/DrinkButtons.jsx\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport share from \"../images/shareIcon.svg\";\nimport notFavorite from \"../images/whiteHeartIcon.svg\";\nimport favorite from \"../images/blackHeartIcon.svg\";\nimport { getDoneLocalStorage, getStartedLocalStorage, getIfHasBeenFavorited } from './FoodButtons';\nimport { ContextAplication } from '../context/ContextAplication';\n\nfunction clickFavorite(setIsFavorite, recipeInfo, isFavorite) {\n  setIsFavorite(fav => !fav);\n  const {\n    idDrink,\n    strDrink,\n    strDrinkThumb,\n    strAlcoholic,\n    strCategory\n  } = recipeInfo;\n  const drinkInfo = {\n    id: idDrink,\n    type: 'bebida',\n    area: '',\n    category: strCategory,\n    alcoholicOrNot: strAlcoholic,\n    name: strDrink,\n    image: strDrinkThumb\n  };\n  let storage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n\n  if (!storage) {\n    storage = [];\n  }\n\n  if (!isFavorite) {\n    const newStorage = [...storage, drinkInfo];\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n\n  if (isFavorite) {\n    const newStorage = storage.filter(e => !e.id === idDrink);\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n}\n\nfunction renderShareAndFavoriteButtons(setIsFavorite, recipeInfo, isFavorite, goToRoute, id) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"favourite\",\n    onClick: () => clickFavorite(setIsFavorite, recipeInfo, isFavorite),\n    src: favorite,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, getIfHasBeenFavorited(id) ? /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"favorite-btn\",\n    src: favorite,\n    alt: \"favorite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"favorite-btn\",\n    src: notFavorite,\n    alt: \"favorite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(CopyToClipboard, {\n    text: window.location.href,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => alert('Link copiado!'),\n    className: \"favourite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"share-btn\",\n    src: share,\n    alt: \"icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }))), goToRoute && /*#__PURE__*/React.createElement(Redirect, {\n    to: `/bebidas/${id}/in-progress`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }));\n}\n\nfunction Buttons() {\n  const [goToRoute, setGoToRoute] = useState(false);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const {\n    recipeInfo,\n    id\n  } = useContext(ContextAplication);\n  useEffect(() => {\n    if (getIfHasBeenFavorited(id)) {\n      setIsFavorite(true);\n    }\n  }, [id]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bottom-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, !getDoneLocalStorage(id) && !getStartedLocalStorage(id) && /*#__PURE__*/React.createElement(\"button\", {\n    \"data-testid\": \"start-recipe-btn\",\n    type: \"button\",\n    onClick: () => setGoToRoute(true),\n    className: \"start-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"Iniciar Receita\"), getStartedLocalStorage(id) && !getDoneLocalStorage(id) && /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"start-button\",\n    \"data-testid\": \"start-recipe-btn\",\n    onClick: () => setGoToRoute(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, \"Continuar Receita\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"share-and-favourite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, renderShareAndFavoriteButtons(setIsFavorite, recipeInfo, isFavorite, goToRoute, id)), goToRoute && /*#__PURE__*/React.createElement(Redirect, {\n    to: `/bebidas/${id}/in-progress`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }));\n}\n\nexport default Buttons;","map":{"version":3,"sources":["/Users/fmartins/Trybe/fabemiliano.github.io/projetos/recipe-app/sd-03-recipes-app-04/src/components/DrinkButtons.jsx"],"names":["React","useState","useContext","useEffect","Redirect","CopyToClipboard","getDoneLocalStorage","getStartedLocalStorage","getIfHasBeenFavorited","ContextAplication","clickFavorite","setIsFavorite","recipeInfo","isFavorite","fav","idDrink","strDrink","strDrinkThumb","strAlcoholic","strCategory","drinkInfo","id","type","area","category","alcoholicOrNot","name","image","storage","JSON","parse","localStorage","getItem","newStorage","setItem","stringify","filter","e","renderShareAndFavoriteButtons","goToRoute","favorite","notFavorite","window","location","href","alert","share","Buttons","setGoToRoute"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport share from '../images/shareIcon.svg';\nimport notFavorite from '../images/whiteHeartIcon.svg';\nimport favorite from '../images/blackHeartIcon.svg';\nimport { getDoneLocalStorage, getStartedLocalStorage, getIfHasBeenFavorited } from './FoodButtons';\nimport { ContextAplication } from '../context/ContextAplication';\n\nfunction clickFavorite(setIsFavorite, recipeInfo, isFavorite) {\n  setIsFavorite((fav) => !fav);\n  const {\n    idDrink, strDrink, strDrinkThumb, strAlcoholic, strCategory,\n  } = recipeInfo;\n  const drinkInfo = {\n    id: idDrink,\n    type: 'bebida',\n    area: '',\n    category: strCategory,\n    alcoholicOrNot: strAlcoholic,\n    name: strDrink,\n    image: strDrinkThumb,\n  };\n  let storage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n  if (!storage) {\n    storage = [];\n  }\n  if (!isFavorite) {\n    const newStorage = [...storage, drinkInfo];\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n  if (isFavorite) {\n    const newStorage = storage.filter((e) => !e.id === idDrink);\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newStorage));\n  }\n}\n\nfunction renderShareAndFavoriteButtons(setIsFavorite, recipeInfo, isFavorite, goToRoute, id) {\n  return (\n    <div>\n      <button\n        type=\"button\"\n        className=\"favourite\"\n        onClick={() => clickFavorite(setIsFavorite, recipeInfo, isFavorite)}\n        src={favorite}\n      >\n        {getIfHasBeenFavorited(id)\n          ? <img data-testid=\"favorite-btn\" src={favorite} alt=\"favorite\" />\n          : <img data-testid=\"favorite-btn\" src={notFavorite} alt=\"favorite\" />}\n      </button>\n      <CopyToClipboard text={window.location.href}>\n        <button\n          type=\"button\"\n          onClick={() => alert('Link copiado!')}\n          className=\"favourite\"\n        >\n          <img data-testid=\"share-btn\" src={share} alt=\"icon\" />\n        </button>\n      </CopyToClipboard>\n      {goToRoute && <Redirect to={`/bebidas/${id}/in-progress`} />}\n    </div>\n  );\n}\n\nfunction Buttons() {\n  const [goToRoute, setGoToRoute] = useState(false);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const { recipeInfo, id } = useContext(ContextAplication);\n  useEffect(() => {\n    if (getIfHasBeenFavorited(id)) { setIsFavorite(true); }\n  }, [id]);\n\n  return (\n    <div className=\"bottom-buttons\">\n      {!getDoneLocalStorage(id) && !getStartedLocalStorage(id) && (\n        <button\n          data-testid=\"start-recipe-btn\"\n          type=\"button\"\n          onClick={() => setGoToRoute(true)}\n          className=\"start-button\"\n        >\n          Iniciar Receita\n        </button>\n      )}\n      {getStartedLocalStorage(id) && !getDoneLocalStorage(id) && (\n        <button\n          type=\"button\"\n          className=\"start-button\"\n          data-testid=\"start-recipe-btn\"\n          onClick={() => setGoToRoute(true)}\n        >\n          Continuar Receita\n        </button>\n      )}\n      <div className=\"share-and-favourite\">\n        {renderShareAndFavoriteButtons(setIsFavorite, recipeInfo, isFavorite, goToRoute, id)}\n      </div>\n      {goToRoute && <Redirect to={`/bebidas/${id}/in-progress`} />}\n    </div>\n  );\n}\n\nexport default Buttons;\n"]},"metadata":{},"sourceType":"module"}