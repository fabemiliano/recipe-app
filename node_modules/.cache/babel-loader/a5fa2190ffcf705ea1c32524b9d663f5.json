{"ast":null,"code":"var _jsxFileName = \"/Users/fmartins/Trybe/fabemiliano.github.io/projetos/recipe-app/sd-03-recipes-app-04/src/components/helpersComponents/MealsControlsRecipeProgress.jsx\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Redirect } from 'react-router-dom';\nexport function handleChecked(event, value, type, values) {\n  const {\n    checked,\n    setCountChecked,\n    countChecked,\n    checkLocalStorage,\n    setChecked,\n    id\n  } = values;\n  checked.checkbox.forEach((checkbox, i) => {\n    if (event.target.checked === true) {\n      setCountChecked(countChecked + 1);\n    }\n\n    if (event.target.checked === false) {\n      if (checkLocalStorage.countChecked < 0) {\n        setCountChecked(countChecked + 1);\n      } else {\n        setCountChecked(countChecked - 1);\n      }\n    }\n\n    if (checkbox.id === Number(event.target.id)) {\n      checked.checkbox[i].checked = event.target.checked;\n    }\n  });\n  setChecked(prevState => ({ ...prevState,\n    checked: { ...prevState.checkbox.checked,\n      checkbox: value\n    }\n  }));\n  localStorage.setItem('inProgressRecipes', JSON.stringify({\n    [type]: {\n      [id]: checked.checkbox\n    },\n    countChecked\n  }));\n}\n\nfunction doneRecipe(recipeInfo) {\n  const {\n    idMeal,\n    strArea,\n    strCategory,\n    strMeal,\n    strMealThumb,\n    strTags\n  } = recipeInfo;\n  const mealInfo = {\n    id: idMeal,\n    type: 'comida',\n    area: strArea,\n    category: strCategory,\n    alcoholicOrNot: '',\n    name: strMeal,\n    image: strMealThumb,\n    doneDate: new Date(),\n    tags: strTags\n  };\n  let storage = JSON.parse(localStorage.getItem('doneRecipes'));\n\n  if (!storage) {\n    storage = [];\n  } else {\n    const newStorage = [...storage, mealInfo];\n    localStorage.setItem('doneRecipes', JSON.stringify(newStorage));\n  }\n}\n\nfunction MealsControlsRecipeProgress(props) {\n  const [goToRoute, setGoToRoute] = useState(false);\n  const {\n    valuesToRender\n  } = props;\n  const {\n    inProgressRecipe,\n    data,\n    checkLocalStorage,\n    buttonEnabled,\n    id,\n    checked,\n    history\n  } = valuesToRender;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, inProgressRecipe.strMeal), /*#__PURE__*/React.createElement(\"h2\", {\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, inProgressRecipe.strCategory), /*#__PURE__*/React.createElement(\"h3\", {\n    \"data-testid\": \"recipe-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, \" Ingredients \"), data.map((element, i) => /*#__PURE__*/React.createElement(\"div\", {\n    key: element.meal,\n    \"data-testid\": `${i}-ingredient-step`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: i,\n    type: \"checkbox\",\n    checked: checkLocalStorage.meals[id][i].checked,\n    name: element.meal,\n    onClick: event => handleChecked(event, checked.checkbox[i].checked, 'meals', valuesToRender),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, element.meal), element.mensure))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"instructions\",\n    \"data-testid\": \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"Instru\\xE7\\xF5es\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, inProgressRecipe.strInstructions)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, buttonEnabled ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"start-button in-progress\",\n    enable: true,\n    \"data-testid\": \"finish-recipe-btn\",\n    onClick: () => doneRecipe(inProgressRecipe, setGoToRoute).then(history.push('/receitas-feitas')),\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, \"Finish Recipe Button\") : /*#__PURE__*/React.createElement(\"button\", {\n    className: \"start-button in-progress\",\n    disabled: true,\n    \"data-testid\": \"finish-recipe-btn\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, \"Finish Recipe Button\")), goToRoute && /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/receitas-feitas\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }));\n}\n\nexport default MealsControlsRecipeProgress;\nMealsControlsRecipeProgress.propTypes = {\n  valuesToRender: PropTypes.string.isRequired\n};","map":{"version":3,"sources":["/Users/fmartins/Trybe/fabemiliano.github.io/projetos/recipe-app/sd-03-recipes-app-04/src/components/helpersComponents/MealsControlsRecipeProgress.jsx"],"names":["React","useState","PropTypes","Redirect","handleChecked","event","value","type","values","checked","setCountChecked","countChecked","checkLocalStorage","setChecked","id","checkbox","forEach","i","target","Number","prevState","localStorage","setItem","JSON","stringify","doneRecipe","recipeInfo","idMeal","strArea","strCategory","strMeal","strMealThumb","strTags","mealInfo","area","category","alcoholicOrNot","name","image","doneDate","Date","tags","storage","parse","getItem","newStorage","MealsControlsRecipeProgress","props","goToRoute","setGoToRoute","valuesToRender","inProgressRecipe","data","buttonEnabled","history","map","element","meal","meals","mensure","strInstructions","then","push","propTypes","string","isRequired"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Redirect } from 'react-router-dom';\n\nexport function handleChecked(event, value, type, values) {\n  const {\n    checked, setCountChecked, countChecked, checkLocalStorage, setChecked, id,\n  } = values;\n  checked.checkbox.forEach((checkbox, i) => {\n    if (event.target.checked === true) {\n      setCountChecked(countChecked + 1);\n    } if (event.target.checked === false) {\n      if (checkLocalStorage.countChecked < 0) {\n        setCountChecked(countChecked + 1);\n      } else {\n        setCountChecked(countChecked - 1);\n      }\n    }\n    if (checkbox.id === Number(event.target.id)) {\n      checked.checkbox[i].checked = event.target.checked;\n    }\n  });\n  setChecked((prevState) => ({\n    ...prevState,\n    checked: {\n      ...prevState.checkbox.checked,\n      checkbox: value,\n    },\n  }));\n  localStorage.setItem('inProgressRecipes', JSON.stringify({ [type]: { [id]: checked.checkbox }, countChecked }));\n}\n\nfunction doneRecipe(recipeInfo) {\n  const {\n    idMeal, strArea, strCategory, strMeal, strMealThumb, strTags,\n  } = recipeInfo;\n  const mealInfo = {\n    id: idMeal,\n    type: 'comida',\n    area: strArea,\n    category: strCategory,\n    alcoholicOrNot: '',\n    name: strMeal,\n    image: strMealThumb,\n    doneDate: new Date(),\n    tags: strTags,\n  };\n  let storage = JSON.parse(localStorage.getItem('doneRecipes'));\n  if (!storage) {\n    storage = [];\n  } else {\n    const newStorage = [...storage, mealInfo];\n    localStorage.setItem('doneRecipes', JSON.stringify(newStorage));\n  }\n}\n\nfunction MealsControlsRecipeProgress(props) {\n  const [goToRoute, setGoToRoute] = useState(false);\n  const { valuesToRender } = props;\n  const {\n    inProgressRecipe, data, checkLocalStorage, buttonEnabled,\n    id, checked, history,\n  } = valuesToRender;\n  return (\n    <div>\n      <h1 data-testid=\"recipe-category\">{inProgressRecipe.strMeal}</h1>\n      <h2 data-testid=\"recipe-category\">{inProgressRecipe.strCategory}</h2>\n      <h3 data-testid=\"recipe-title\"> Ingredients </h3>\n      {data.map((element, i) => (\n        <div key={element.meal} data-testid={`${i}-ingredient-step`}>\n          <span>\n            <input id={i} type=\"checkbox\" checked={checkLocalStorage.meals[id][i].checked} name={element.meal} onClick={(event) => handleChecked(event, checked.checkbox[i].checked, 'meals', valuesToRender)} />\n            <span>{element.meal}</span>\n            {element.mensure}\n          </span>\n        </div>\n      ))}\n      <div className=\"instructions\" data-testid=\"instructions\">\n        <h3>Instruções</h3>\n        <p>{inProgressRecipe.strInstructions}</p>\n      </div>\n      <div>\n        {buttonEnabled\n          ? (\n            <button className=\"start-button in-progress\" enable data-testid=\"finish-recipe-btn\" onClick={() => doneRecipe(inProgressRecipe, setGoToRoute).then(history.push('/receitas-feitas'))} type=\"button\">\n              Finish Recipe Button\n            </button>\n          )\n          : (\n            <button\n              className=\"start-button in-progress\"\n              disabled\n              data-testid=\"finish-recipe-btn\"\n              type=\"button\"\n            >\n              Finish Recipe Button\n            </button>\n          )}\n      </div>\n      {goToRoute && <Redirect to=\"/receitas-feitas\" />}\n    </div>\n  );\n}\n\nexport default MealsControlsRecipeProgress;\n\nMealsControlsRecipeProgress.propTypes = {\n  valuesToRender: PropTypes.string.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}